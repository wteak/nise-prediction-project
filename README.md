대용량 시계열 데이터 기반 태양광 일사량 예측 모델
1. 프로젝트 개요
본 프로젝트는 약 1,900만 행(2.5GB)에 달하는 방대한 환경 센서 데이터를 분석하여 태양광 발전의 핵심 변수인 일사량을 예측하는 AI 모델링 프로젝트입니다. 전체 데이터의 90% 이상이 결측치로 이루어진 극한의 데이터 환경에서, 단순한 모델 튜닝을 넘어 데이터 중심의 전처리 전략과 물리적 도메인 지식을 결합하여 결측 정보를 복원하고 예측 정확도를 극대화하는 데 초점을 맞췄습니다.

활동 기간: 2025.10.25 ~ 2025.11.14

참가 형태: 팀 프로젝트 (우택 외 1명)

주요 목표: 대용량 시계열 데이터 파이프라인 구축 및 결측치 복원 최적화 

2. 사용 기술
언어: Python 3.13.7

데이터 처리: Pandas, Numpy (Feather 포맷 활용)

모델링: LightGBM Regressor

군집화: Scikit-learn (KMeans, StandardScaler)

3. 프로젝트 구조
nins-prediction-project/
│
├── README.md                 # 프로젝트 설명서
├── main      # 최종 통합 파이프라인 (전처리, 학습, 추론)
├── requirements.txt          # 필요 라이브러리 목록
│
├── modules/                  # 최종 코드의 핵심 모듈
│   ├── 01_data_loader.ipynb    # CSV 대용량 처리 및 Feather 변환
│   ├── 02_preprocessing.ipynb  # 타겟 분리 및 데이터 통합
│   └── 03_interpolation.ipynb  # 결측치 보간 및 군집화 로직
│
└── archive/                  # 연구 과정 및 시행착오 기록
    ├── exp_01_hybrid_interp.ipynb    # 복합 보간법 시도 기록
    ├── exp_02_feature_eng.ipynb      # 초기 파생변수 생성 실험
    ├── exp_03_complex_mapping.ipynb  # 맵핑 방식 접근 시도
    └── exp_04_memory_failure.ipynb   # 메모리 최적화 이전 실험
4. 핵심 수행 내용
1) 데이터 전처리 최적화

메모리 효율화: 초기 분할 처리 방식에서 발생하는 병목 현상을 해결하기 위해 물리 메모리를 증설하고 Feather 포맷을 도입하여 입출력 속도를 개선했습니다. 

보간 전략 수립: 선형이나 스플라인 보간은 긴 결측 구간에서 왜곡된 패턴을 생성함을 확인했습니다. 이에 물리적 추세를 유지하면서 노이즈를 최소화하는 FFill과 BFill 방식을 최종 채택했습니다. 

2) 통합 파이프라인 구축

One-Universe 전략: 학습 데이터와 테스트 데이터를 개별 처리할 경우 발생하는 분포 불일치 문제를 해결하기 위해, 두 데이터를 하나로 합쳐 처리하는 통합 파이프라인을 구축했습니다. 


순서 복원: 처리 과정에서 데이터 순서가 뒤섞이는 것을 방지하기 위해 고유 인덱스를 활용한 복원 안전장치를 마련했습니다. 

3) 이중 군집화 전략
단순 군집화의 한계를 넘기 위해 데이터 특성을 이원화하여 반영했습니다. 

위치 군집 (K=20): 위도와 경도 좌표를 기반으로 미세한 지형지물 특성을 반영하기 위해 세분화했습니다.

기후 군집 (K=10): 기온, 습도, 풍속을 기반으로 지리적 위치와 무관하게 유사한 기상 패턴을 공유하는 발전소들을 묶어 일반화 성능을 강화했습니다.

4) 물리 도메인 지식 적용
시차 문제 해결: 데이터의 타임스탬프(UTC)와 한국의 실제 일조 시간(KST) 간의 9시간 시차로 인해 발생한 물리적 불일치를 규명하고, 이를 데이터 로드 단계에서 보정했습니다.


태양 고도 변수: 단순 시간 변수 대신, 태양의 남중 고도와 계절별 낮의 길이 변화를 반영한 코사인 변수를 생성하여 모델이 낮과 밤의 물리적 주기를 이해하도록 설계했습니다. 


야간 마스킹: 물리적으로 해가 뜰 수 없는 시간대(20:30 ~ 04:30)의 예측값을 0으로 보정하는 후처리를 적용했습니다. 

5. 결과
최종 성과: 초기 단순 모델 대비 성능을 획기적으로 향상시켰습니다.


튜닝: 마감 임박 상황에서 기계적인 탐색 대신, 학습률을 0.01로 낮추고 트리를 10,000개로 늘리는 정밀 학습 전략을 사용하여 최적의 성능을 이끌어냈습니다. 

6. 한계 및 배운 점
한계: 기상청의 공식 관측 데이터 등 외부 데이터를 연계했다면 결측치 보간의 정확도를 더 높일 수 있었을 것이라는 아쉬움이 남습니다.


배운 점: 110개의 파생 변수를 만들고 지우는 과정 끝에, 복잡한 기교보다는 데이터 본연의 물리적 특성 이해와 결측치를 바라보는 올바른 관점이 성능의 핵심임을 깨달았습니다.
